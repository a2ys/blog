---
const { name, abbreviation, description, slug } = Astro.props;

function getSeriesColor(name: string) {
  const colors = [
    "bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200",
    "bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200",
    "bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200",
    "bg-amber-100 dark:bg-amber-900 text-amber-800 dark:text-amber-200",
    "bg-rose-100 dark:bg-rose-900 text-rose-800 dark:text-rose-200",
    "bg-teal-100 dark:bg-teal-900 text-teal-800 dark:text-teal-200",
  ];

  let hash = 0;
  for (let i = 0; i < name.length; i++) {
    hash = name.charCodeAt(i) + ((hash << 5) - hash);
  }

  return colors[Math.abs(hash) % colors.length];
}

const colorClass = getSeriesColor(abbreviation || name);
const initials = abbreviation.toUpperCase();
---

<div
  class="bg-white dark:bg-gray-900 rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-300 flex flex-col h-full"
>
  <a href={`/series/${slug}`} class="block flex-grow">
    <div class={`h-24 flex items-center justify-center ${colorClass}`}>
      <div class="flex items-center justify-center">
        <span class="text-3xl font-bold">{initials}</span>
      </div>
    </div>

    <div class="p-6 flex flex-col flex-grow">
      <h2
        class="text-gray-900 dark:text-white text-xl font-bold mb-2 border-b pb-2 border-gray-200 dark:border-gray-700"
      >
        {name}
      </h2>
      {
        description && (
          <p class="text-gray-700 dark:text-gray-100 mb-4 line-clamp-3 flex-grow">
            {description}
          </p>
        )
      }
      <div class="flex items-center mt-2">
        <span
          class="text-blue-600 dark:text-blue-300 font-medium flex items-center"
        >
          Explore series
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-5 w-5 ml-1"
            viewBox="0 0 20 20"
            fill="currentColor"
          >
            <path
              fill-rule="evenodd"
              d="M12.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-2.293-2.293a1 1 0 010-1.414z"
              clip-rule="evenodd"></path>
          </svg>
        </span>
      </div>
    </div>
  </a>
</div>
